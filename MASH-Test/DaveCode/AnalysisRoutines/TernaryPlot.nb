(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.4' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     28344,        763]
NotebookOptionsPosition[     27454,        728]
NotebookOutlinePosition[     27842,        745]
CellTagsIndexPosition[     27799,        742]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Ternary Plot", "Title",
 CellChangeTimes->{{3.6706169208047647`*^9, 3.670616928065783*^9}, {
  3.6763928806103163`*^9, 3.676392882465309*^9}}],

Cell["\<\
HMSC* (The ternary plot function is not mine. Downloaded from: \
http://mathematica.stackexchange.com/questions/39733/how-to-plot-ternary-\
density-plots/39751)\
\>", "Text",
 CellChangeTimes->{{3.676392177643515*^9, 3.676392184030815*^9}, 
   3.676392701888331*^9, {3.67793394189292*^9, 3.6779339700298853`*^9}}],

Cell["\<\
Description: Imports all the CSV files in a directory and generates basic \
population dynamics plots for further analysis. Created for data in: \
\[OpenCurlyDoubleQuote]Outputs/Trivariate\[CloseCurlyDoubleQuote]
-CSV files must have headers indicating the column tag for easy filtering
-Naming convention: covO0_covITN0_covAR0.0_PID.4612.csv\
\>", "Text",
 CellChangeTimes->{{3.676392206992317*^9, 3.676392229201673*^9}, {
  3.676392265418539*^9, 3.6763923521661663`*^9}, {3.676392915489298*^9, 
  3.6763929211268263`*^9}, {3.676397540119122*^9, 3.676397550149078*^9}}],

Cell[CellGroupData[{

Cell["Functions", "Section",
 CellChangeTimes->{{3.6755176662252207`*^9, 3.675517669820113*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"triangleTicks", "[", 
    RowBox[{
     RowBox[{"arg_List:", " ", 
      RowBox[{"{", 
       RowBox[{"5", ",", "4"}], "}"}]}], ",", 
     RowBox[{"tl_:", " ", "0.01"}]}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"divs", ",", "dQ", ",", "sides", ",", "st"}], "}"}], ",", 
     RowBox[{
      RowBox[{"dQ", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"VectorQ", "[", 
          RowBox[{"#", ",", "IntegerQ"}], "]"}], "&&", 
         RowBox[{
          RowBox[{"Length", "[", "#", "]"}], "\[Equal]", "2"}]}], "&"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"sides", "=", 
       RowBox[{"Partition", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"0", ",", "0"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"1", ",", "0"}], "}"}], ",", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"1", ",", 
              RowBox[{"Sqrt", "[", "3", "]"}]}], "}"}], "/", "2"}]}], "}"}], 
         ",", "2", ",", "1", ",", "1"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"divs", "=", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"dQ", "[", "arg", "]"}], "||", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"MatrixQ", "[", 
             RowBox[{"arg", ",", "NumericQ"}], "]"}], "&&", 
            RowBox[{
             RowBox[{"First", "[", 
              RowBox[{"Dimensions", "[", "arg", "]"}], "]"}], "\[Equal]", 
             "1"}]}], ")"}]}], ",", 
         RowBox[{"{", "arg", "}"}], ",", "arg"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"divs", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"dQ", "[", "#", "]"}], ",", 
           RowBox[{"DeleteCases", "[", 
            RowBox[{
             RowBox[{"MapAt", "[", 
              RowBox[{
               RowBox[{"Function", "[", 
                RowBox[{"f", ",", 
                 RowBox[{"Flatten", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"ArrayPad", "[", 
                    RowBox[{"#", ",", 
                    RowBox[{"-", "1"}]}], "]"}], "&"}], "/@", "f"}], "]"}]}], 
                "]"}], ",", 
               RowBox[{"FindDivisions", "[", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{"0", ",", "1", ",", 
                   RowBox[{"1", "/", 
                    RowBox[{"Rest", "[", 
                    RowBox[{"FoldList", "[", 
                    RowBox[{"Times", ",", "1", ",", "#"}], "]"}], "]"}]}]}], 
                  "}"}], ",", "#"}], "]"}], ",", "2"}], "]"}], ",", 
             RowBox[{"{", "}"}]}], "]"}], ",", "#"}], "]"}], "&"}], "/@", 
        RowBox[{"divs", "[", 
         RowBox[{"[", 
          RowBox[{"Mod", "[", 
           RowBox[{
            RowBox[{"Range", "[", "3", "]"}], ",", 
            RowBox[{"Length", "[", "divs", "]"}], ",", "1"}], "]"}], "]"}], 
         "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"st", "=", 
       RowBox[{"MapThread", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"Join", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"Transpose", "[", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"1", "-", "d"}], ",", "d"}], "}"}], "]"}], ".", 
               "#1"}], ",", 
              RowBox[{"List", "/@", "d"}], ",", "2"}], "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"d", ",", "#2"}], "}"}]}], "]"}], "&"}], ",", 
         RowBox[{"{", 
          RowBox[{"sides", ",", "divs"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"MapIndexed", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"pt", "=", 
              RowBox[{"N", "[", 
               RowBox[{"Most", "[", "#1", "]"}], "]"}]}], ",", "os"}], "}"}], 
           ",", 
           RowBox[{
            RowBox[{"os", "=", 
             RowBox[{"Scaled", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"RotationTransform", "[", 
                 RowBox[{"2", " ", "\[Pi]", " ", 
                  RowBox[{
                   RowBox[{"(", 
                    RowBox[{
                    RowBox[{"#2", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "-", "2"}], ")"}], "/", 
                   "3"}]}], "]"}], "[", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"tl", "/", 
                   RowBox[{"#2", "[", 
                    RowBox[{"[", "2", "]"}], "]"}]}], ",", "0"}], "}"}], 
                "]"}], ",", "pt"}], "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"#2", "[", 
                RowBox[{"[", "2", "]"}], "]"}], "\[Equal]", "2"}], ",", 
              RowBox[{"Line", "[", 
               RowBox[{"{", 
                RowBox[{"pt", ",", "os"}], "}"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"Text", "[", 
                 RowBox[{
                  RowBox[{"ToString", "[", 
                   RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"IntegerQ", "[", 
                    RowBox[{"Last", "[", "#1", "]"}], "]"}], ",", "Identity", 
                    ",", "N"}], "]"}], "[", 
                    RowBox[{"Last", "[", "#1", "]"}], "]"}], "]"}], ",", "os",
                   ",", 
                  RowBox[{
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", 
                    RowBox[{"1", ",", "1"}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", "1"}], ",", 
                    RowBox[{"-", "1"}]}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"1", ",", 
                    RowBox[{"-", "1"}]}], "}"}]}], "}"}], "[", 
                   RowBox[{"[", 
                    RowBox[{"#2", "[", 
                    RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], "]"}], 
                ",", 
                RowBox[{"Line", "[", 
                 RowBox[{"{", 
                  RowBox[{"pt", ",", "os"}], "}"}], "]"}]}], "}"}]}], 
             "]"}]}]}], "]"}], "&"}], ",", "st", ",", 
        RowBox[{"{", "3", "}"}]}], "]"}]}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Options", "[", "TernaryReliefPlot", "]"}], "=", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"AspectRatio", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"Background", "\[Rule]", "None"}], ",", 
      RowBox[{"BaselinePosition", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"BaseStyle", "\[Rule]", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"ClippingStyle", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"Black", ",", "White"}], "}"}]}], ",", 
      RowBox[{"ColorFunction", "\[Rule]", 
       RowBox[{"ColorData", "[", 
        RowBox[{"{", 
         RowBox[{"\"\<Rainbow\>\"", ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "500"}], "}"}]}], "}"}], "]"}]}], ",", 
      RowBox[{"ColorFunctionScaling", "\[Rule]", "True"}], ",", 
      RowBox[{"ColorOutput", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"ContentSelectable", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"CoordinatesToolOptions", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"DisplayFunction", "\[RuleDelayed]", "$DisplayFunction"}], ",", 
      
      RowBox[{"Epilog", "\[Rule]", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"FormatType", "\[RuleDelayed]", "TraditionalForm"}], ",", 
      RowBox[{"FrameLabel", "\[Rule]", "None"}], ",", 
      RowBox[{"FrameTicks", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"ImageMargins", "\[Rule]", "0."}], ",", 
      RowBox[{"ImagePadding", "\[Rule]", "All"}], ",", 
      RowBox[{"ImageSize", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"ImageSizeRaw", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"LabelStyle", "\[Rule]", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"Method", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"PlotLabel", "\[Rule]", "None"}], ",", 
      RowBox[{"PlotPoints", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
      RowBox[{"PlotRegion", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"PreserveImageOptions", "\[Rule]", "Automatic"}], ",", 
      RowBox[{"Prolog", "\[Rule]", 
       RowBox[{"{", "}"}]}], ",", 
      RowBox[{"RotateLabel", "\[Rule]", "True"}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{"TernaryReliefPlot", "[", 
   RowBox[{"f_", ",", 
    RowBox[{"opts", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "fl", ",", "flt", ",", "ft", ",", "img", ",", "n", ",", "rl", ",", 
      "sides"}], "}"}], ",", 
    RowBox[{
     RowBox[{"sides", "=", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"0", ",", "0"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "0"}], "}"}], ",", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"1", ",", 
           RowBox[{"Sqrt", "[", "3", "]"}]}], "}"}], "/", "2"}]}], "}"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"fl", "=", 
      RowBox[{"OptionValue", "[", "FrameLabel", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"fl", "=!=", "None"}], ",", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"fl", "===", "Automatic"}], ",", 
          RowBox[{"fl", "=", 
           RowBox[{"ToString", "/@", 
            RowBox[{"Range", "[", "3", "]"}]}]}]}], "]"}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Head", "[", "fl", "]"}], "=!=", "List"}], ",", 
          RowBox[{"fl", "=", 
           RowBox[{"PadRight", "[", 
            RowBox[{
             RowBox[{"{", "fl", "}"}], ",", "3", ",", "\"\<\>\""}], "]"}]}]}],
          "]"}], ";", "\[IndentingNewLine]", 
        RowBox[{"flt", "=", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"fl", ",", 
            RowBox[{"ListCorrelate", "[", 
             RowBox[{
              RowBox[{
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"{", "1", "}"}], ",", 
                 RowBox[{"{", "1", "}"}]}], "}"}], "/", "2"}], ",", "sides", 
              ",", "1"}], "]"}]}], "}"}], "~", "Join", "~", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"MatchQ", "[", 
             RowBox[{
              RowBox[{"OptionValue", "[", "RotateLabel", "]"}], ",", 
              RowBox[{"True", "|", "Automatic"}]}], "]"}], ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"0", ",", "2.5"}], "}"}], ",", 
                RowBox[{"{", 
                 RowBox[{"0", ",", 
                  RowBox[{"-", "2.5"}]}], "}"}], ",", 
                RowBox[{"{", 
                 RowBox[{"0", ",", 
                  RowBox[{"-", "2.5"}]}], "}"}]}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"{", 
                 RowBox[{"1", ",", "0"}], "}"}], ",", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{"1", ",", 
                   RowBox[{"-", 
                    RowBox[{"Sqrt", "[", "3", "]"}]}]}], "}"}], "/", "2"}], 
                ",", 
                RowBox[{
                 RowBox[{"{", 
                  RowBox[{"1", ",", 
                   RowBox[{"Sqrt", "[", "3", "]"}]}], "}"}], "/", "2"}]}], 
               "}"}]}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"0", ",", "2.5"}], "}"}], ",", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"-", "2.5"}], ",", "0"}], "}"}], ",", 
               RowBox[{"{", 
                RowBox[{"2.5", ",", "0"}], "}"}]}], "}"}], "}"}]}], 
           "]"}]}]}]}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"ft", "=", 
      RowBox[{"OptionValue", "[", "FrameTicks", "]"}]}], ";", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"ft", "===", "Automatic"}], ",", 
       RowBox[{"ft", "=", 
        RowBox[{"{", 
         RowBox[{"5", ",", "4"}], "}"}]}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"n", "=", 
      RowBox[{"OptionValue", "[", "PlotPoints", "]"}]}], ";", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"n", "===", "Automatic"}], ",", 
       RowBox[{"n", "=", "300"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"img", "=", 
      RowBox[{"ReliefImage", "[", 
       RowBox[{
        RowBox[{"SparseArray", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"{", 
             RowBox[{"j_", ",", "k_"}], "}"}], "/;", 
            RowBox[{"j", "\[GreaterEqual]", "k"}]}], "\[RuleDelayed]", 
           RowBox[{"f", "@@", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"j", "-", "k"}], ",", 
                RowBox[{"k", "-", "1"}], ",", 
                RowBox[{"n", "-", "j"}]}], "}"}], "/", 
              RowBox[{"(", 
               RowBox[{"n", "-", "1"}], ")"}]}], ")"}]}]}], ",", 
          RowBox[{"{", 
           RowBox[{"n", ",", "n"}], "}"}]}], "]"}], ",", 
        RowBox[{"FilterRules", "[", 
         RowBox[{
          RowBox[{"Join", "[", 
           RowBox[{
            RowBox[{"{", "opts", "}"}], ",", 
            RowBox[{"Options", "[", "TernaryReliefPlot", "]"}]}], "]"}], ",", 
          
          RowBox[{"Options", "[", "ReliefImage", "]"}]}], "]"}]}], "]"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"Graphics", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"ft", "=!=", "None"}], ",", 
           RowBox[{"triangleTicks", "[", "ft", "]"}], ",", 
           RowBox[{"{", "}"}]}], "]"}], ",", 
         RowBox[{"Texture", "[", "img", "]"}], ",", 
         RowBox[{"Polygon", "[", 
          RowBox[{"sides", ",", 
           RowBox[{"VertexTextureCoordinates", "\[Rule]", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"0", ",", "0"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"1", ",", "0"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"0", ",", "1"}], "}"}]}], "}"}]}]}], "]"}], ",", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"fl", "=!=", "None"}], ",", 
           RowBox[{"MapThread", "[", 
            RowBox[{"Text", ",", "flt"}], "]"}], ",", 
           RowBox[{"{", "}"}]}], "]"}]}], "}"}], ",", 
       RowBox[{"Axes", "\[Rule]", "False"}], ",", 
       RowBox[{"AxesLabel", "\[Rule]", "None"}], ",", 
       RowBox[{"Frame", "\[Rule]", "False"}], ",", 
       RowBox[{"FrameLabel", "\[Rule]", "None"}], ",", 
       RowBox[{"Method", "\[Rule]", "Automatic"}], ",", 
       RowBox[{"PlotRange", "\[Rule]", "All"}], ",", 
       RowBox[{"FilterRules", "[", 
        RowBox[{
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"{", "opts", "}"}], ",", 
           RowBox[{"Options", "[", "TernaryReliefPlot", "]"}]}], "]"}], ",", 
         RowBox[{"Options", "[", "Graphics", "]"}]}], "]"}]}], "]"}]}]}], 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.6757796205968027`*^9, 3.675779626807734*^9}, {
  3.676392706811522*^9, 3.676392714130286*^9}, {3.6763928663268642`*^9, 
  3.676392873428473*^9}, {3.677933972741143*^9, 3.677933973246499*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Analysis", "Section",
 CellChangeTimes->{{3.675517674341074*^9, 3.6755176775336323`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"SetDirectory", "[", 
  RowBox[{
   RowBox[{"ParentDirectory", "[", 
    RowBox[{"NotebookDirectory", "[", "]"}], "]"}], "<>", "\"\</Outputs/\>\"",
    "<>", "\"\<Trivariate/\>\""}], "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"names", "=", 
   RowBox[{"FileNames", "[", "\"\<*.csv\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rawData", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Import", "[", "#", "]"}], "&"}], "/@", "names"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"data", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"#", "[", 
      RowBox[{"[", 
       RowBox[{
        RowBox[{"2", ";;", "All"}], ",", 
        RowBox[{"2", ";;", "All"}]}], "]"}], "]"}], "&"}], "/@", 
    "rawData"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"totalPopulation", "=", 
    RowBox[{"data", "[", 
     RowBox[{"[", 
      RowBox[{"All", ",", "All", ",", "4"}], "]"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"names", "//", "Length"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"oviTriplet", "=", 
   RowBox[{"ToExpression", "/@", 
    RowBox[{"StringCases", "[", 
     RowBox[{"names", ",", 
      RowBox[{
       RowBox[{"\"\<covO\>\"", "~~", "a__", "~~", "\"\<_covITN\>\""}], 
       "\[Rule]", "a"}]}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"itnTriplet", "=", 
   RowBox[{"ToExpression", "/@", 
    RowBox[{"StringCases", "[", 
     RowBox[{"names", ",", 
      RowBox[{
       RowBox[{
       "___", "~~", "\"\<covITN\>\"", "~~", "a__", "~~", "\"\<_covAR\>\""}], 
       "\[Rule]", "a"}]}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"areTriplet", "=", 
   RowBox[{"ToExpression", "/@", 
    RowBox[{"StringCases", "[", 
     RowBox[{"names", ",", 
      RowBox[{
       RowBox[{
       "___", "~~", "\"\<covAR\>\"", "~~", "a__", "~~", "\"\<_PID\>\""}], 
       "\[Rule]", "a"}]}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"header", "=", 
  RowBox[{
   RowBox[{"rawData", "[", 
    RowBox[{"[", "1", "]"}], "]"}], "[", 
   RowBox[{"[", "1", "]"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"orderedTriplets", "=", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"oviTriplet", ",", "itnTriplet", ",", "areTriplet"}], "}"}], "//",
     "Transpose"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.675511955196219*^9, 3.675511974283265*^9}, {
   3.675512026676931*^9, 3.675512116901917*^9}, {3.67551222522291*^9, 
   3.675512246320695*^9}, {3.675512284143365*^9, 3.675512440104694*^9}, {
   3.67551247813713*^9, 3.675512510522324*^9}, {3.675512595670661*^9, 
   3.6755126191701517`*^9}, {3.675512683845172*^9, 3.675512713966704*^9}, {
   3.675512840682632*^9, 3.67551284741726*^9}, {3.6755128836362553`*^9, 
   3.675512888593192*^9}, 3.675512933357068*^9, {3.675512991379676*^9, 
   3.675513013807062*^9}, {3.675513046431573*^9, 3.675513060056126*^9}, {
   3.6755146235810738`*^9, 3.675514636604732*^9}, {3.675514707023417*^9, 
   3.675514707531283*^9}, {3.6755147721063833`*^9, 3.6755147726563187`*^9}, {
   3.676399920672984*^9, 3.67639992907325*^9}}],

Cell[BoxData["\<\"/Users/chipdelmal/Documents/School/Research/MICROGit/\
Outputs/Trivariate\"\>"], "Output",
 CellChangeTimes->{3.676399932682102*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"\"\>", ",", "\<\"feeding\"\>", ",", "\<\"resting\"\>", 
   ",", "\<\"laying\"\>", ",", "\<\"total\"\>"}], "}"}]], "Output",
 CellChangeTimes->{3.6763999464764214`*^9}]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"tIndex", "=", "10"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"points", "=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Flatten", "/@", "orderedTriplets"}], ",", 
       RowBox[{"totalPopulation", "[", 
        RowBox[{"[", 
         RowBox[{"All", ",", "tIndex"}], "]"}], "]"}]}], "}"}], "//", 
     "Transpose"}], ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"fun", "=", 
   RowBox[{"Interpolation", "[", "points", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"TernaryReliefPlot", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"fun", "[", 
     RowBox[{"#1", ",", "#2", ",", "#3"}], "]"}], "&"}], ",", 
   RowBox[{"ColorFunctionScaling", "\[Rule]", "False"}], ",", 
   RowBox[{"ColorFunction", "\[Rule]", 
    RowBox[{"ColorData", "[", 
     RowBox[{"{", 
      RowBox[{"\"\<TemperatureMap\>\"", ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "200"}], "}"}]}], "}"}], "]"}]}], ",", 
   RowBox[{"FrameLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Style", "[", 
       RowBox[{"\"\<OVI\>\"", ",", "Large"}], "]"}], ",", 
      RowBox[{"Style", "[", 
       RowBox[{"\"\<ITN\>\"", ",", "Large"}], "]"}], ",", 
      RowBox[{"Style", "[", 
       RowBox[{"\"\<ARE\>\"", ",", "Large"}], "]"}]}], "}"}]}], ",", 
   RowBox[{"FrameTicks", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"4", ",", "2"}], "}"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.675779660667672*^9, 3.675779719466926*^9}, {
  3.67578063812658*^9, 3.675780638258411*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"frames", "=", 
   RowBox[{"ParallelTable", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"points", "=", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Flatten", "/@", "orderedTriplets"}], ",", 
           RowBox[{"totalPopulation", "[", 
            RowBox[{"[", 
             RowBox[{"All", ",", "tIndex"}], "]"}], "]"}]}], "}"}], "//", 
         "Transpose"}], ")"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"fun", "=", 
       RowBox[{"Interpolation", "[", "points", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"plot", "=", 
       RowBox[{"TernaryReliefPlot", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"fun", "[", 
           RowBox[{"#1", ",", "#2", ",", "#3"}], "]"}], "&"}], ",", 
         RowBox[{"ClippingStyle", "\[Rule]", "Automatic"}], ",", 
         RowBox[{"ColorFunctionScaling", "\[Rule]", "False"}], ",", 
         RowBox[{"ColorFunction", "\[Rule]", 
          RowBox[{"ColorData", "[", 
           RowBox[{"{", 
            RowBox[{"\"\<TemperatureMap\>\"", ",", 
             RowBox[{"{", 
              RowBox[{"0", ",", "150"}], "}"}]}], "}"}], "]"}]}], ",", 
         RowBox[{"FrameLabel", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"Style", "[", 
             RowBox[{"\"\<OVI\>\"", ",", "Large"}], "]"}], ",", 
            RowBox[{"Style", "[", 
             RowBox[{"\"\<ITN\>\"", ",", "Large"}], "]"}], ",", 
            RowBox[{"Style", "[", 
             RowBox[{"\"\<ARE\>\"", ",", "Large"}], "]"}]}], "}"}]}], ",", 
         RowBox[{"FrameTicks", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"4", ",", "2"}], "}"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Grid", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", "tIndex", "}"}], ",", 
         RowBox[{"{", "plot", "}"}]}], "}"}], "]"}]}], "\[IndentingNewLine]", 
     ",", 
     RowBox[{"{", 
      RowBox[{"tIndex", ",", "1", ",", 
       RowBox[{
        RowBox[{"data", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "//", "Length"}]}], "}"}]}], "]"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{"frames", "//", "Last"}]}], "Input",
 CellChangeTimes->{{3.675512638485155*^9, 3.6755126677487173`*^9}, 
   3.6755128272136383`*^9, {3.675514582749152*^9, 3.6755146163566523`*^9}, {
   3.675514763285564*^9, 3.675514769289942*^9}, {3.675514905726386*^9, 
   3.675514921942008*^9}, {3.6755149743962584`*^9, 3.675515053650999*^9}, {
   3.675515131447598*^9, 3.675515150665577*^9}, {3.675515201317545*^9, 
   3.675515231007822*^9}, 3.675515421725417*^9, {3.675515472106427*^9, 
   3.6755155532411127`*^9}, {3.675516200452224*^9, 3.675516224210805*^9}, {
   3.675517688489785*^9, 3.67551769110461*^9}, {3.675780653546674*^9, 
   3.6757806815620613`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"ListAnimate", "[", "frames", "]"}], ";", "\[IndentingNewLine]", 
   RowBox[{"Export", "[", 
    RowBox[{"\"\<animGif.gif\>\"", ",", "frames"}], "]"}]}], "*)"}]], "Input",\

 CellChangeTimes->{{3.675515928762945*^9, 3.675515932687715*^9}, {
  3.675515980122094*^9, 3.675516030558298*^9}, {3.675517682656636*^9, 
  3.6755176853948812`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"triv", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"Rasterize", "[", 
      RowBox[{
       RowBox[{"frames", "[", 
        RowBox[{"[", "#", "]"}], "]"}], ",", 
       RowBox[{"ImageResolution", "\[Rule]", "200"}]}], "]"}], "&"}], "/@", 
    RowBox[{"Range", "[", 
     RowBox[{"2", ",", 
      RowBox[{"frames", "//", "Length"}], ",", "10"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Partition", "[", 
   RowBox[{"triv", ",", "5"}], "]"}], "//", "Grid"}], "\[IndentingNewLine]", 
 RowBox[{"Export", "[", 
  RowBox[{"\"\<ARE_ITN_OVI.png\>\"", ",", "%", ",", 
   RowBox[{"ImageSize", "\[Rule]", "1000"}], ",", 
   RowBox[{"ImageResolution", "\[Rule]", "200"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.675780169459667*^9, 3.675780236003462*^9}, {
  3.67578028395513*^9, 3.675780328362122*^9}, {3.6757803795533743`*^9, 
  3.6757803934725122`*^9}, {3.675780859895465*^9, 3.6757809125948353`*^9}, {
  3.675781025587743*^9, 3.675781058822691*^9}}]
}, Closed]]
}, Open  ]]
},
WindowSize->{1429, 797},
WindowMargins->{{Automatic, 5}, {Automatic, 2}},
Magnification:>0.75 Inherited,
FrontEndVersion->"10.4 for Mac OS X x86 (32-bit, 64-bit Kernel) (February 25, \
2016)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 148, 2, 69, "Title"],
Cell[731, 26, 323, 6, 23, "Text"],
Cell[1057, 34, 580, 9, 54, "Text"],
Cell[CellGroupData[{
Cell[1662, 47, 96, 1, 48, "Section"],
Cell[1761, 50, 16150, 420, 322, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[17948, 475, 95, 1, 38, "Section"],
Cell[CellGroupData[{
Cell[18068, 480, 3140, 82, 114, "Input"],
Cell[21211, 564, 150, 2, 17, "Output"],
Cell[21364, 568, 211, 4, 17, "Output"]
}, Open  ]],
Cell[21590, 575, 1564, 43, 56, "Input"],
Cell[23157, 620, 2867, 67, 85, "Input"],
Cell[26027, 689, 391, 9, 27, "Input"],
Cell[26421, 700, 1005, 24, 36, "Input"]
}, Closed]]
}, Open  ]]
}
]
*)

